$(function(){var e=0;$("figure").each(function(){var i=$(this).find("table tbody tr td.code div");if(i.length>line_limit){e++;var l=$('<h6><i class="fa fa-chevron-up"></i><span class="collapse-label">收起</span></h6>');$(this).prepend(l);var a=$(this).find("table");var s=$("<div></div>");a.remove();s.append(a);$(this).append(s);$(this).find("h6").click(function(){if(s.is(":hidden")){l.find("i").removeClass("close");l.find("span.collapse-label").html("收起")}else{l.find("i").addClass("close");l.find("span.collapse-label").html("展开")}var e=i.length*20;if(e<200)e=200;else if(e>2e3)e=2e3;s.slideToggle()})}})});